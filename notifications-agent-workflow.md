graph TD
    %% Start Point
    START([System Event Triggered]) --> EVENT_CLASSIFICATION_AGENT[ðŸ“Š Event Classification Agent]

    %% Event Classification
    EVENT_CLASSIFICATION_AGENT --> EVENT_TYPE_ANALYSIS[ðŸ” Event Type Analysis]
    EVENT_TYPE_ANALYSIS --> URGENCY_ASSESSMENT_AGENT[ðŸš¨ Urgency Assessment Agent]

    URGENCY_ASSESSMENT_AGENT --> PRIORITY_LEVEL{Event Priority}
    PRIORITY_LEVEL -->|Critical| CRITICAL_NOTIFICATION_AGENT[ðŸš¨ Critical Notification Agent]
    PRIORITY_LEVEL -->|High| HIGH_PRIORITY_AGENT[âš¡ High Priority Agent]
    PRIORITY_LEVEL -->|Medium| MEDIUM_PRIORITY_AGENT[ðŸ“‹ Medium Priority Agent]
    PRIORITY_LEVEL -->|Low| LOW_PRIORITY_AGENT[ðŸ“ Low Priority Agent]

    %% User Context Analysis
    EVENT_CLASSIFICATION_AGENT --> USER_CONTEXT_AGENT[ðŸ‘¤ User Context Agent]
    USER_CONTEXT_AGENT --> PREFERENCE_ANALYSIS_AGENT[âš™ï¸ Preference Analysis Agent]
    PREFERENCE_ANALYSIS_AGENT --> SUBSCRIPTION_CHECK_AGENT[ðŸ“§ Subscription Check Agent]

    SUBSCRIPTION_CHECK_AGENT --> OPT_IN_STATUS{Opt-in Status}
    OPT_IN_STATUS -->|Opted In| CHANNEL_SELECTION_AGENT[ðŸ“± Channel Selection Agent]
    OPT_IN_STATUS -->|Opted Out| SUPPRESSION_AGENT[ðŸš« Suppression Agent]

    SUPPRESSION_AGENT --> END_SUPPRESSED([ðŸ”‡ Notification Suppressed])

    %% Channel Selection
    CHANNEL_SELECTION_AGENT --> MULTI_CHANNEL_AGENT[ðŸŒ Multi-Channel Agent]
    MULTI_CHANNEL_AGENT --> EMAIL_CHANNEL_AGENT[ðŸ“§ Email Channel Agent]
    MULTI_CHANNEL_AGENT --> PUSH_CHANNEL_AGENT[ðŸ“± Push Channel Agent]
    MULTI_CHANNEL_AGENT --> SMS_CHANNEL_AGENT[ðŸ“± SMS Channel Agent]
    MULTI_CHANNEL_AGENT --> IN_APP_CHANNEL_AGENT[ðŸ“± In-App Channel Agent]

    EMAIL_CHANNEL_AGENT --> EMAIL_PREFERENCE_CHECK[ðŸ“§ Email Preference Check]
    PUSH_CHANNEL_AGENT --> PUSH_PREFERENCE_CHECK[ðŸ“± Push Preference Check]
    SMS_CHANNEL_AGENT --> SMS_PREFERENCE_CHECK[ðŸ“± SMS Preference Check]
    IN_APP_CHANNEL_AGENT --> IN_APP_PREFERENCE_CHECK[ðŸ“± In-App Preference Check]

    %% Content Personalization
    CHANNEL_SELECTION_AGENT --> CONTENT_PERSONALIZATION_AGENT[ðŸŽ¨ Content Personalization Agent]
    CONTENT_PERSONALIZATION_AGENT --> MESSAGE_CRAFTING_AGENT[ðŸ“ Message Crafting Agent]
    MESSAGE_CRAFTING_AGENT --> TEMPLATE_SELECTION_AGENT[ðŸ“‹ Template Selection Agent]

    TEMPLATE_SELECTION_AGENT --> DYNAMIC_CONTENT_AGENT[ðŸ”„ Dynamic Content Agent]
    DYNAMIC_CONTENT_AGENT --> VARIABLE_SUBSTITUTION_AGENT[ðŸ”§ Variable Substitution Agent]

    VARIABLE_SUBSTITUTION_AGENT --> LOCALIZATION_AGENT[ðŸŒ Localization Agent]
    LOCALIZATION_AGENT --> LANGUAGE_ADAPTATION_AGENT[ðŸ—£ï¸ Language Adaptation Agent]

    LANGUAGE_ADAPTATION_AGENT --> CULTURAL_CONTEXT_AGENT[ðŸ›ï¸ Cultural Context Agent]
    CULTURAL_CONTEXT_AGENT --> FINAL_CONTENT_AGENT[âœ… Final Content Agent]

    %% Scheduling & Timing
    FINAL_CONTENT_AGENT --> TIMING_OPTIMIZATION_AGENT[â° Timing Optimization Agent]
    TIMING_OPTIMIZATION_AGENT --> USER_TIMEZONE_AGENT[ðŸŒ User Timezone Agent]
    USER_TIMEZONE_AGENT --> AVAILABILITY_CHECK_AGENT[ðŸ“… Availability Check Agent]

    AVAILABILITY_CHECK_AGENT --> SCHEDULING_AGENT[ðŸ“… Scheduling Agent]
    SCHEDULING_AGENT --> DELAY_OPTIMIZATION_AGENT[â±ï¸ Delay Optimization Agent]

    DELAY_OPTIMIZATION_AGENT --> SEND_QUEUE_AGENT[ðŸ“¤ Send Queue Agent]

    %% Email Processing
    EMAIL_PREFERENCE_CHECK --> EMAIL_PROCESSING_AGENT[ðŸ“§ Email Processing Agent]
    EMAIL_PROCESSING_AGENT --> EMAIL_TEMPLATE_AGENT[ðŸ“§ Email Template Agent]
    EMAIL_TEMPLATE_AGENT --> EMAIL_RENDERING_AGENT[ðŸ“§ Email Rendering Agent]

    EMAIL_RENDERING_AGENT --> SMTP_DELIVERY_AGENT[ðŸ“§ SMTP Delivery Agent]
    SMTP_DELIVERY_AGENT --> EMAIL_TRACKING_AGENT[ðŸ“§ Email Tracking Agent]

    %% Push Notification Processing
    PUSH_PREFERENCE_CHECK --> PUSH_PROCESSING_AGENT[ðŸ“± Push Processing Agent]
    PUSH_PROCESSING_AGENT --> DEVICE_TOKEN_AGENT[ðŸ“± Device Token Agent]
    DEVICE_TOKEN_AGENT --> FCM_AGENT[ðŸ”¥ FCM Agent]

    FCM_AGENT --> PUSH_DELIVERY_AGENT[ðŸ“± Push Delivery Agent]
    PUSH_DELIVERY_AGENT --> PUSH_TRACKING_AGENT[ðŸ“± Push Tracking Agent]

    %% SMS Processing
    SMS_PREFERENCE_CHECK --> SMS_PROCESSING_AGENT[ðŸ“± SMS Processing Agent]
    SMS_PROCESSING_AGENT --> SMS_TEMPLATE_AGENT[ðŸ“± SMS Template Agent]
    SMS_TEMPLATE_AGENT --> SMS_GATEWAY_AGENT[ðŸ“± SMS Gateway Agent]

    SMS_GATEWAY_AGENT --> SMS_DELIVERY_AGENT[ðŸ“± SMS Delivery Agent]
    SMS_DELIVERY_AGENT --> SMS_TRACKING_AGENT[ðŸ“± SMS Tracking Agent]

    %% In-App Processing
    IN_APP_PREFERENCE_CHECK --> IN_APP_PROCESSING_AGENT[ðŸ“± In-App Processing Agent]
    IN_APP_PROCESSING_AGENT --> UI_NOTIFICATION_AGENT[ðŸ“± UI Notification Agent]
    UI_NOTIFICATION_AGENT --> BADGE_UPDATE_AGENT[ðŸ“± Badge Update Agent]

    BADGE_UPDATE_AGENT --> IN_APP_DELIVERY_AGENT[ðŸ“± In-App Delivery Agent]
    IN_APP_DELIVERY_AGENT --> IN_APP_TRACKING_AGENT[ðŸ“± In-App Tracking Agent]

    %% Delivery & Tracking
    EMAIL_TRACKING_AGENT --> DELIVERY_STATUS_AGENT[ðŸ“Š Delivery Status Agent]
    PUSH_TRACKING_AGENT --> DELIVERY_STATUS_AGENT
    SMS_TRACKING_AGENT --> DELIVERY_STATUS_AGENT
    IN_APP_TRACKING_AGENT --> DELIVERY_STATUS_AGENT

    DELIVERY_STATUS_AGENT --> SUCCESS_MONITORING_AGENT[âœ… Success Monitoring Agent]
    SUCCESS_MONITORING_AGENT --> FAILURE_HANDLING_AGENT[âŒ Failure Handling Agent]

    FAILURE_HANDLING_AGENT --> RETRY_AGENT[ðŸ”„ Retry Agent]
    RETRY_AGENT --> RETRY_SUCCESS{Retry Success?}
    RETRY_SUCCESS -->|Yes| SUCCESS_MONITORING_AGENT
    RETRY_SUCCESS -->|No| FAILURE_LOGGING_AGENT[ðŸ“ Failure Logging Agent]

    %% User Interaction Tracking
    SUCCESS_MONITORING_AGENT --> INTERACTION_TRACKING_AGENT[ðŸ‘† Interaction Tracking Agent]
    INTERACTION_TRACKING_AGENT --> OPEN_RATE_AGENT[ðŸ“§ Open Rate Agent]
    INTERACTION_TRACKING_AGENT --> CLICK_RATE_AGENT[ðŸ‘† Click Rate Agent]
    INTERACTION_TRACKING_AGENT --> CONVERSION_AGENT[ðŸ’° Conversion Agent]

    OPEN_RATE_AGENT --> ENGAGEMENT_ANALYTICS_AGENT[ðŸ“Š Engagement Analytics Agent]
    CLICK_RATE_AGENT --> ENGAGEMENT_ANALYTICS_AGENT
    CONVERSION_AGENT --> ENGAGEMENT_ANALYTICS_AGENT

    %% A/B Testing
    FINAL_CONTENT_AGENT --> AB_TESTING_AGENT[ðŸ§ª A/B Testing Agent]
    AB_TESTING_AGENT --> VARIANT_GENERATION_AGENT[ðŸ”„ Variant Generation Agent]
    VARIANT_GENERATION_AGENT --> TEST_GROUP_AGENT[ðŸ‘¥ Test Group Agent]

    TEST_GROUP_AGENT --> PERFORMANCE_COMPARISON_AGENT[ðŸ“Š Performance Comparison Agent]
    PERFORMANCE_COMPARISON_AGENT --> WINNER_SELECTION_AGENT[ðŸ† Winner Selection Agent]

    WINNER_SELECTION_AGENT --> OPTIMIZATION_AGENT[âš¡ Optimization Agent]

    %% Smart Routing
    SEND_QUEUE_AGENT --> SMART_ROUTING_AGENT[ðŸ§  Smart Routing Agent]
    SMART_ROUTING_AGENT --> USER_BEHAVIOR_AGENT[ðŸ‘¤ User Behavior Agent]
    USER_BEHAVIOR_AGENT --> CONTEXT_AWARE_AGENT[ðŸŽ¯ Context Aware Agent]

    CONTEXT_AWARE_AGENT --> ROUTING_DECISION_AGENT[ðŸŽ¯ Routing Decision Agent]
    ROUTING_DECISION_AGENT --> CHANNEL_PRIORITIZATION_AGENT[ðŸ“Š Channel Prioritization Agent]

    %% Real-time Processing
    START --> REAL_TIME_CHECK{Real-time Required?}
    REAL_TIME_CHECK -->|Yes| REAL_TIME_PROCESSING_AGENT[âš¡ Real-time Processing Agent]
    REAL_TIME_CHECK -->|No| BATCH_PROCESSING_AGENT[ðŸ“¦ Batch Processing Agent]

    REAL_TIME_PROCESSING_AGENT --> IMMEDIATE_DELIVERY_AGENT[ðŸš€ Immediate Delivery Agent]
    BATCH_PROCESSING_AGENT --> QUEUE_PROCESSING_AGENT[ðŸ“‹ Queue Processing Agent]

    %% Analytics & Learning
    ENGAGEMENT_ANALYTICS_AGENT --> MACHINE_LEARNING_AGENT[ðŸ§  Machine Learning Agent]
    MACHINE_LEARNING_AGENT --> PREDICTIVE_MODEL_AGENT[ðŸ”® Predictive Model Agent]

    PREDICTIVE_MODEL_AGENT --> PERSONALIZATION_ENGINE_AGENT[ðŸŽ¯ Personalization Engine Agent]
    PERSONALIZATION_ENGINE_AGENT --> RECOMMENDATION_AGENT[ðŸ’¡ Recommendation Agent]

    RECOMMENDATION_AGENT --> CONTENT_PERSONALIZATION_AGENT

    %% Compliance & Security
    FINAL_CONTENT_AGENT --> COMPLIANCE_CHECK_AGENT[ðŸ“‹ Compliance Check Agent]
    COMPLIANCE_CHECK_AGENT --> GDPR_COMPLIANCE_AGENT[ðŸ”’ GDPR Compliance Agent]
    COMPLIANCE_CHECK_AGENT --> SPAM_FILTER_AGENT[ðŸš« Spam Filter Agent]

    GDPR_COMPLIANCE_AGENT --> DATA_PRIVACY_AGENT[ðŸ” Data Privacy Agent]
    SPAM_FILTER_AGENT --> CONTENT_FILTER_AGENT[ðŸš« Content Filter Agent]

    DATA_PRIVACY_AGENT --> SECURITY_ENCRYPTION_AGENT[ðŸ” Security Encryption Agent]
    CONTENT_FILTER_AGENT --> APPROVAL_AGENT[âœ… Approval Agent]

    APPROVAL_AGENT --> SEND_QUEUE_AGENT

    %% Error Handling & Recovery
    FAILURE_LOGGING_AGENT --> ERROR_ANALYSIS_AGENT[ðŸ” Error Analysis Agent]
    ERROR_ANALYSIS_AGENT --> RECOVERY_AGENT[ðŸ”§ Recovery Agent]

    RECOVERY_AGENT --> ALTERNATIVE_CHANNEL_AGENT[ðŸ”„ Alternative Channel Agent]
    ALTERNATIVE_CHANNEL_AGENT --> FALLBACK_DELIVERY_AGENT[ðŸ”„ Fallback Delivery Agent]

    %% End States
    END_SUPPRESSED --> END_SUPPRESSED_FINAL([ðŸ”‡ Suppressed])
    SUCCESS_MONITORING_AGENT --> END_SUCCESS([âœ… Delivered Successfully])
    FAILURE_LOGGING_AGENT --> END_FAILED([âŒ Delivery Failed])
    OPTIMIZATION_AGENT --> END_OPTIMIZED([âš¡ Optimized])
    MACHINE_LEARNING_AGENT --> END_LEARNING([ðŸ§  Learning Complete])

    %% Styling
    classDef startClass fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef decisionClass fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef processClass fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef parallelClass fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef errorClass fill:#ffebee,stroke:#b71c1c,stroke-width:2px
    classDef endClass fill:#e8eaf6,stroke:#1a237e,stroke-width:2px
    classDef agentClass fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef realtimeClass fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    classDef analyticsClass fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px

    class START,END_SUCCESS,END_FAILED,END_OPTIMIZED,END_LEARNING startClass
    class PRIORITY_LEVEL,OPT_IN_STATUS,RETRY_SUCCESS,REAL_TIME_CHECK decisionClass
    class EVENT_CLASSIFICATION_AGENT,EVENT_TYPE_ANALYSIS,URGENCY_ASSESSMENT_AGENT,CRITICAL_NOTIFICATION_AGENT,HIGH_PRIORITY_AGENT,MEDIUM_PRIORITY_AGENT,LOW_PRIORITY_AGENT,USER_CONTEXT_AGENT,PREFERENCE_ANALYSIS_AGENT,SUBSCRIPTION_CHECK_AGENT,CHANNEL_SELECTION_AGENT,MULTI_CHANNEL_AGENT,EMAIL_CHANNEL_AGENT,PUSH_CHANNEL_AGENT,SMS_CHANNEL_AGENT,IN_APP_CHANNEL_AGENT,EMAIL_PREFERENCE_CHECK,PUSH_PREFERENCE_CHECK,SMS_PREFERENCE_CHECK,IN_APP_PREFERENCE_CHECK,CONTENT_PERSONALIZATION_AGENT,MESSAGE_CRAFTING_AGENT,TEMPLATE_SELECTION_AGENT,DYNAMIC_CONTENT_AGENT,VARIABLE_SUBSTITUTION_AGENT,LOCALIZATION_AGENT,LANGUAGE_ADAPTATION_AGENT,CULTURAL_CONTEXT_AGENT,FINAL_CONTENT_AGENT,TIMING_OPTIMIZATION_AGENT,USER_TIMEZONE_AGENT,AVAILABILITY_CHECK_AGENT,SCHEDULING_AGENT,DELAY_OPTIMIZATION_AGENT,SEND_QUEUE_AGENT,EMAIL_PROCESSING_AGENT,EMAIL_TEMPLATE_AGENT,EMAIL_RENDERING_AGENT,SMTP_DELIVERY_AGENT,EMAIL_TRACKING_AGENT,PUSH_PROCESSING_AGENT,DEVICE_TOKEN_AGENT,FCM_AGENT,PUSH_DELIVERY_AGENT,PUSH_TRACKING_AGENT,SMS_PROCESSING_AGENT,SMS_TEMPLATE_AGENT,SMS_GATEWAY_AGENT,SMS_DELIVERY_AGENT,SMS_TRACKING_AGENT,IN_APP_PROCESSING_AGENT,UI_NOTIFICATION_AGENT,BADGE_UPDATE_AGENT,IN_APP_DELIVERY_AGENT,IN_APP_TRACKING_AGENT,DELIVERY_STATUS_AGENT,SUCCESS_MONITORING_AGENT,FAILURE_HANDLING_AGENT,RETRY_AGENT,FAILURE_LOGGING_AGENT,INTERACTION_TRACKING_AGENT,OPEN_RATE_AGENT,CLICK_RATE_AGENT,CONVERSION_AGENT,ENGAGEMENT_ANALYTICS_AGENT,AB_TESTING_AGENT,VARIANT_GENERATION_AGENT,TEST_GROUP_AGENT,PERFORMANCE_COMPARISON_AGENT,WINNER_SELECTION_AGENT,OPTIMIZATION_AGENT,SMART_ROUTING_AGENT,USER_BEHAVIOR_AGENT,CONTEXT_AWARE_AGENT,ROUTING_DECISION_AGENT,CHANNEL_PRIORITIZATION_AGENT,REAL_TIME_PROCESSING_AGENT,IMMEDIATE_DELIVERY_AGENT,BATCH_PROCESSING_AGENT,QUEUE_PROCESSING_AGENT,MACHINE_LEARNING_AGENT,PREDICTIVE_MODEL_AGENT,PERSONALIZATION_ENGINE_AGENT,RECOMMENDATION_AGENT,COMPLIANCE_CHECK_AGENT,GDPR_COMPLIANCE_AGENT,SPAM_FILTER_AGENT,DATA_PRIVACY_AGENT,CONTENT_FILTER_AGENT,SECURITY_ENCRYPTION_AGENT,APPROVAL_AGENT,ERROR_ANALYSIS_AGENT,RECOVERY_AGENT,ALTERNATIVE_CHANNEL_AGENT,FALLBACK_DELIVERY_AGENT processClass
    class SUPPRESSION_AGENT,FAILURE_HANDLING_AGENT,ERROR_ANALYSIS_AGENT errorClass
    class END_SUPPRESSED,END_SUPPRESSED_FINAL endClass
    class REAL_TIME_PROCESSING_AGENT,IMMEDIATE_DELIVERY_AGENT realtimeClass
    class ENGAGEMENT_ANALYTICS_AGENT,MACHINE_LEARNING_AGENT,PREDICTIVE_MODEL_AGENT analyticsClass